<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>When the Knapsack Doesn't Fit: A Russian Orthodox Response to Racial Essentialism ‚Äì Terminal Dispatch</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600;700;800&family=Source+Sans+3:wght@300;400;500;600&display=swap" rel="stylesheet">
    <script src="/blogData.js"></script>
    <style>
        :root {
            --bg-color: #fbfbf9;
            --card-bg: #ffffff;
            --text-primary: #121212;
            --text-secondary: #5a5a5a;
            --accent-color: #c41e3a;
            --border-color: #121212;
            --border-light: #e0e0e0;
            --font-headline: 'Playfair Display', Georgia, serif;
            --font-body: 'Source Sans 3', -apple-system, BlinkMacSystemFont, sans-serif;
        }

        @media (prefers-color-scheme: dark) {
            :root {
                --bg-color: #0d0d0d;
                --card-bg: #1a1a1a;
                --text-primary: #f5f5f5;
                --text-secondary: #a0a0a0;
                --border-color: #f5f5f5;
                --border-light: #333;
            }
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }
        
        body {
            font-family: var(--font-body);
            background-color: var(--bg-color);
            color: var(--text-primary);
            line-height: 1.6;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        a { text-decoration: none; color: inherit; transition: color 0.2s; }
        a:hover { color: var(--accent-color); }
        ul, ol { margin-left: 1.5rem; }

        .container { max-width: 1100px; margin: 0 auto; padding: 0 2rem; width: 100%; }
        .container-narrow { max-width: 900px; margin: 0 auto; padding: 0 2rem; width: 100%; }

        /* Main */
        main {
            flex: 1;
        }

        /* Masthead */
        .masthead {
            text-align: center;
            padding: 1.5rem 0 1rem;
            border-bottom: 1px solid var(--border-light);
        }

        .masthead-date {
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 2px;
            color: var(--text-secondary);
            margin-bottom: 0.75rem;
        }

        .masthead-title {
            font-family: var(--font-headline);
            font-size: 3.5rem;
            font-weight: 700;
            letter-spacing: -1px;
            margin-bottom: 0.5rem;
        }

        .masthead-title a {
            color: inherit;
        }

        /* Navigation */
        header {
            border-bottom: 1px solid var(--border-light);
            background: var(--bg-color);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        nav {
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 1rem 0;
            position: relative;
        }

        .nav-links {
            display: flex;
            gap: 2rem;
            list-style: none;
            justify-content: center;
        }

        .nav-links a {
            font-size: 0.75rem;
            font-weight: 400;
            text-transform: uppercase;
            letter-spacing: 1.5px;
            color: var(--text-secondary);
        }

        .nav-links a:hover {
            color: var(--text-primary);
        }

        /* Dark Mode Toggle */
        .dark-mode-toggle {
            background: none;
            border: 1px solid var(--border-light);
            color: var(--text-secondary);
            cursor: pointer;
            padding: 0.5rem 0.75rem;
            font-size: 1.2rem;
            transition: all 0.2s;
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: absolute;
            right: 0;
        }

        .dark-mode-toggle:hover {
            border-color: var(--accent-color);
            color: var(--accent-color);
        }

        /* Table of Contents */
        .toc-container {
            background: var(--card-bg);
            border: 1px solid var(--border-light);
            border-radius: 4px;
            padding: 1.5rem;
            margin: 2rem 0 3rem;
        }

        .toc-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
            margin-bottom: 1rem;
        }

        .toc-title {
            font-family: var(--font-headline);
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--text-primary);
        }

        .toc-toggle {
            background: none;
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            font-size: 0.85rem;
            padding: 0;
        }

        .toc-list {
            list-style: none;
            margin: 0;
            padding: 0;
        }

        .toc-list li {
            margin-bottom: 0.5rem;
        }

        .toc-list a {
            font-size: 0.95rem;
            color: var(--text-secondary);
            text-decoration: none;
            transition: color 0.2s;
        }

        .toc-list a:hover {
            color: var(--accent-color);
        }

        .toc-list .toc-h3 {
            padding-left: 1.5rem;
            font-size: 0.9rem;
        }

        .toc-list.collapsed {
            display: none;
        }

        /* Series Navigation */
        .series-navigation {
            background: var(--card-bg);
            border-left: 3px solid var(--accent-color);
            padding: 1.5rem;
            margin: 2rem 0 3rem;
        }

        .series-title {
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 2px;
            color: var(--accent-color);
            margin-bottom: 0.5rem;
            font-weight: 600;
        }

        .series-name {
            font-family: var(--font-headline);
            font-size: 1.35rem;
            font-weight: 600;
            margin-bottom: 1rem;
        }

        .series-progress {
            font-size: 0.85rem;
            color: var(--text-secondary);
            margin-bottom: 1.5rem;
        }

        .series-links {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .series-link {
            flex: 1;
            min-width: 200px;
            padding: 1rem;
            border: 1px solid var(--border-light);
            text-decoration: none;
            transition: all 0.2s;
        }

        .series-link:hover {
            border-color: var(--accent-color);
        }

        .series-link-label {
            font-size: 0.7rem;
            text-transform: uppercase;
            letter-spacing: 1.5px;
            color: var(--text-secondary);
            margin-bottom: 0.5rem;
        }

        .series-link-title {
            font-size: 0.95rem;
            font-weight: 600;
            color: var(--text-primary);
        }

        /* Social Share Buttons */
        .social-share {
            display: flex;
            gap: 0.75rem;
            padding: 1.5rem 0;
            border-top: 1px solid var(--border-light);
            border-bottom: 1px solid var(--border-light);
            margin: 2rem 0;
            flex-wrap: wrap;
        }

        .share-label {
            font-size: 0.85rem;
            color: var(--text-secondary);
            margin-right: 0.5rem;
            align-self: center;
        }

        .share-button {
            padding: 0.5rem 1rem;
            border: 1px solid var(--border-light);
            background: transparent;
            color: var(--text-secondary);
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
            cursor: pointer;
            transition: all 0.2s;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }

        .share-button:hover {
            border-color: var(--accent-color);
            color: var(--accent-color);
        }

        /* Related Articles */
        .related-articles {
            border-top: 1px solid var(--border-light);
            padding: 3rem 0;
            margin-top: 2rem;
        }

        .related-title {
            font-family: var(--font-headline);
            font-size: 1.75rem;
            font-weight: 600;
            margin-bottom: 2rem;
            text-align: center;
        }

        .related-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 2rem;
        }

        .related-article {
            border: 1px solid var(--border-light);
            padding: 1.5rem;
            transition: all 0.2s;
        }

        .related-article:hover {
            border-color: var(--accent-color);
        }

        .related-article .category {
            display: inline-block;
            font-size: 0.65rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1.5px;
            color: var(--accent-color);
            margin-bottom: 0.75rem;
        }

        .related-article h3 {
            font-family: var(--font-headline);
            font-size: 1.25rem;
            font-weight: 600;
            line-height: 1.3;
            margin-bottom: 0.75rem;
        }

        .related-article h3 a {
            color: var(--text-primary);
        }

        .related-article h3 a:hover {
            color: var(--accent-color);
        }

        .related-article .excerpt {
            font-size: 0.95rem;
            line-height: 1.6;
            color: var(--text-secondary);
        }

        /* Article Header */
        .article-header {
            text-align: center;
            padding: 4rem 0 3rem;
            border-bottom: 1px solid var(--border-light);
            margin-bottom: 3rem;
        }

        .article-category {
            display: inline-block;
            font-size: 0.7rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 2px;
            color: var(--accent-color);
            margin-bottom: 1.5rem;
            border: 1px solid var(--accent-color);
            padding: 0.25rem 0.75rem;
        }

        .article-title {
            font-family: var(--font-headline);
            font-size: 3rem;
            font-weight: 700;
            line-height: 1.15;
            margin-bottom: 1.5rem;
            letter-spacing: -0.5px;
            max-width: 900px;
            margin-left: auto;
            margin-right: auto;
        }

        .article-subtitle {
            font-size: 1.35rem;
            color: var(--text-secondary);
            line-height: 1.6;
            max-width: 650px;
            margin: 0 auto 2rem;
        }

        .article-meta {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        .article-meta .author {
            font-weight: 600;
            color: var(--text-primary);
        }

        .article-meta .separator {
            margin: 0 0.5rem;
        }

        /* Article Content */
        .article-content {
            padding-bottom: 0;
        }

        .article-content p {
            font-size: 1.2rem;
            line-height: 1.85;
            margin-bottom: 1.75rem;
            color: var(--text-primary);
        }

        .article-content h2 {
            font-family: var(--font-headline);
            font-size: 1.75rem;
            font-weight: 600;
            margin-top: 3rem;
            margin-bottom: 1.25rem;
            letter-spacing: -0.25px;
        }

        .article-content h3 {
            font-family: var(--font-headline);
            font-size: 1.35rem;
            font-weight: 600;
            margin-top: 2.5rem;
            margin-bottom: 1rem;
        }

        .article-content ul,
        .article-content ol {
            font-size: 1.2rem;
            line-height: 1.85;
            margin-bottom: 1.75rem;
            padding-left: 1.5rem;
        }

        .article-content li {
            margin-bottom: 0.75rem;
        }

        .article-content blockquote {
            border-left: 3px solid var(--accent-color);
            padding-left: 1.5rem;
            margin: 2.5rem 0;
            font-style: italic;
            font-size: 1.3rem;
            color: var(--text-secondary);
        }

        .article-content code {
            font-family: 'SF Mono', 'Fira Code', monospace;
            background: var(--border-light);
            padding: 0.2rem 0.4rem;
            border-radius: 3px;
            font-size: 0.9em;
        }

        .article-content pre {
            background: var(--card-bg);
            border: 1px solid var(--border-light);
            padding: 1.5rem;
            overflow-x: auto;
            margin: 2rem 0;
            border-radius: 4px;
        }

        .article-content pre code {
            background: none;
            padding: 0;
            font-size: 0.95rem;
            line-height: 1.6;
        }

        .article-content a {
            color: var(--accent-color);
            text-decoration: underline;
            text-underline-offset: 2px;
        }

        .article-content a:hover {
            text-decoration: none;
        }

        .article-content em {
            font-style: italic;
        }

        /* Drop Cap */
        .article-content > p:first-of-type::first-letter {
            font-family: var(--font-headline);
            float: left;
            font-size: 4.5rem;
            line-height: 0.8;
            padding-right: 0.75rem;
            padding-top: 0.25rem;
            font-weight: 700;
            color: var(--accent-color);
        }

        /* Article Footer */
        .article-footer {
            border-top: 1px solid var(--border-light);
            padding: 3rem 0;
            margin-bottom: 2rem;
        }

        .article-tags {
            display: flex;
            gap: 0.75rem;
            flex-wrap: wrap;
            margin-bottom: 2rem;
        }

        .article-tags a {
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: var(--text-secondary);
            border: 1px solid var(--border-light);
            padding: 0.4rem 0.8rem;
        }

        .article-tags a:hover {
            border-color: var(--accent-color);
            color: var(--accent-color);
        }

        .back-link {
            font-size: 0.85rem;
            color: var(--text-secondary);
        }

        .back-link a {
            color: var(--accent-color);
        }

        /* Footer */
        footer {
            margin-top: auto;
            border-top: 3px double var(--border-color);
            padding: 2.5rem 0;
            text-align: center;
        }

        .footer-logo {
            font-family: var(--font-headline);
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 1rem;
        }

        .footer-tagline {
            font-size: 0.85rem;
            color: var(--text-secondary);
            margin-bottom: 1.5rem;
        }

        .footer-links {
            display: flex;
            gap: 1.5rem;
            justify-content: center;
            font-size: 0.85rem;
            color: var(--text-secondary);
        }

        .footer-links a {
            color: var(--text-secondary);
        }

        .footer-links a:hover {
            color: var(--accent-color);
        }

        @media (max-width: 768px) {
            .masthead-title {
                font-size: 2.5rem;
            }

            .article-title {
                font-size: 2rem;
            }

            .article-subtitle {
                font-size: 1.1rem;
            }

            .article-content p {
                font-size: 1.1rem;
            }

            .article-content > p:first-of-type::first-letter {
                font-size: 3.5rem;
            }
        }
    </style>
</head>
<body>

    <!-- Masthead -->
    <div class="masthead">
        <div class="container">
            <p class="masthead-date" id="current-date"></p>
            <h1 class="masthead-title"><a href="/dispatch/">Terminal Dispatch</a></h1>
            <p class="masthead-subtitle">Ancient Faith. Modern Systems.</p>
        </div>
    </div>

    <!-- Navigation -->
    <header>
        <div class="container">
            <nav>
                <ul class="nav-links">
                    <li><a href="/">‚Üê Portfolio</a></li>
                    <li><a href="/dispatch/">Latest</a></li>
                    <li><a href="/dispatch/archive.html">Archive</a></li>
                    <li><a href="/dispatch/contact.html">Contact</a></li>
                </ul>
                <button class="dark-mode-toggle" id="dark-mode-toggle" aria-label="Toggle dark mode">
                    <span class="icon">‚òæ</span>
                </button>
            </nav>
        </div>
    </header>

    <main>
        <article>
            <div class="article-header container">
                <span class="article-category">Critical Analysis</span>
                <h1 class="article-title">When the Knapsack Doesn't Fit: A Russian Orthodox Response to Racial Essentialism</h1>
                <p class="article-subtitle">What happens when the framework of privilege can't account for the persecution of supposedly privileged groups?</p>
                <p class="article-meta">
                    By <span class="author">Evan Wologodzew</span>
                    <span class="separator">¬∑</span>
                    <time datetime="2026-01-15">January 15, 2026</time>
                    <span class="separator">¬∑</span>
                    <span class="reading-time" id="reading-time">12 min read</span>
                </p>
            </div>

            <!-- Series Navigation (if article is part of a series) -->
            <div id="series-navigation" class="container-narrow"></div>

            <!-- Table of Contents -->
            <div id="toc-container" class="container-narrow"></div>

            <div class="article-content container-narrow" id="article-content">
                
                <p>In November 2025, U.S. Representative Joe Wilson accused Russian Orthodox Christian Outside Russia (ROCOR) clergy, including my bishop, of serving as "vehicles of foreign influence" for advocating religious freedom for the persecuted Ukrainian Orthodox Church.</p>

                <p>To label a Church born of exile as a tool for the very regimes it fled is a historical blunder of epic proportions. Nearly two-thirds of American Orthodox are first- or second-generation immigrants. For over a thousand years the Church has been where our defining trauma is honored, not rebranded as "dominance." When the state, or anyone, categorizes us by group guilt, it fails to see that our presence here is not a sign of privilege, but a testimony of survival.</p>

                <p>According to racial essentialist frameworks‚Äîtypified by works like Peggy McIntosh's <em>White Privilege: Unpacking the Invisible Knapsack</em>‚Äîthis shouldn't be possible. Item 21 of that seminal text reads: <em>"I am never asked to speak for all the people of my racial group."</em></p>

                <p>Yet there I was. Reduced to a demographic category, suspected of collective loyalty, even to the point of foreign espionage! I was denied an individual voice, not because of my "Whiteness", but because my faith is a threat to the institutional status quo.</p>

                <p>The logic of racial essentialism is unfalsifiable. Say "I don't experience this privilege," and it responds: <em>That's what a privileged person would say.</em> Point to your own persecution, and it responds: <em>Wrong context. We're talking about race in America.</em></p>

                <p>I was baptized into the Russian Orthodox Church Outside Russia as an infant. My great-grandfather was executed by the Bolsheviks for his loyalty to the Tsar and the Orthodox faith; his body disposed amongst a pile of similar believers. I will never be able to visit his grave.</p>

                <p>My great-grandfather didn't die defending "just a faith", he died defending a religio-ethnic nationalism that was fundamentally about Whiteness, even if we didn't use that exact term. The Tsar he was loyal to presided over an empire built on ethnic and racial hierarchy. The Church he gave his life to sanctified that hierarchy as God's will.</p>

                <p>The Bolsheviks killed and enslaved my ancestors not because they were "underprivileged," but because they viewed Orthodoxy as "Great Russian chauvinism": too White, too powerful, too connected to the old state. My family was targeted as the oppressor class.</p>

                <p>My presence in America testifies this oppression. I am not here because my ancestors conquered new territory; I am here because they fled from their own. Just like my ancestors, ROCOR is a church of exile, built by refugees who carried nothing across the border but their liturgy. To call our survival "privilege" distorts the entire picture. It takes our defining trauma and rebrands it as the same power structure that tried, and almost succeeded, to annihilate us.</p>

                <p>My "Whiteness" guarantees neither safety from history nor protection from the state. But because racial essentialism categorizes me as "dominant," the framework assumes I require no testimony. My heritage is erased by design.</p>

                <p>McIntosh's specific logic belongs to a much wider lineage of secularized, post-Enlightenment Christian ideals, a framework that retains the guilt of the Puritan but discards the redemption of the Christ. Its fatal error is projection. It mistakes the specific stability of the Anglo-American academic elite for a universal 'White' experience. It is this specific class that holds institutional power to define reality. It is this class that has, directly or indirectly, oppressed mine while asserting itself as the unconscious default.</p>

                <p>This is why I feel personal connection to this rhetoric. Not because I feel offended, but because racial essentialism is another link in a long chain that has systemically dismissed and erased my heritage.</p>

                <p>In modern American institutions, it is the secular progressive who moves with unearned ease. The secular progressive finds their worldview reinforced by every HR department, administrative policy, and university curriculum. The secular progressive is never asked to speak for their group, because their perspective is treated not as a perspective but as objective rationality.</p>

                <p>As an Orthodox Christian, I offer a completely different model: <strong>communion.</strong></p>

                <p>In racial essentialist frameworks, the entire idea of personhood is filtered first not through being, but intersectionality: your oppression points versus my privilege points. In Orthodoxy, I view you through the Icon: you are made in the Image of God. While racial essentialism often dilutes human relations to transactions of guilt and grievance, the Orthodox model requires humility from all parties involved. Not as moral preference, but within ontological participation of something greater than mankind itself.</p>

                <p>This means my responsibility to you, even as a stranger, is infinite. Not limited by "allyship" or "solidarity," but defined by love. It requires transformation of the self, not just my vocabulary. My faith asks me to view myself as a bearer of the Divine Image, called to communion with every human being.</p>

                <p>This choice was made by my great-grandfather at the barrel of a Bolshevik rifle. It's the same choice Solzhenitsyn articulates with harrowing precision in his magnum opus <em>The Gulag Archipelago</em>:</p>

                <blockquote>"The line separating good and evil passes not through states, nor between classes, nor between political parties either, but right through every human heart, and through all human hearts."</blockquote>

                <p>I willingly choose to make this distinction daily.</p>

                <hr style="margin: 3rem 0; border: none; border-top: 1px solid var(--border-light);">

                <p style="font-style: italic; color: var(--text-secondary);">This essay reflects personal theological convictions and family experience, and does not represent the official positions of the Russian Orthodox Church Outside Russia.</p>

            </div>

            <!-- Social Share Buttons -->
            <div class="container-narrow">
                <div class="social-share" id="social-share">
                    <span class="share-label">Share:</span>
                </div>
            </div>

            <!-- Related Articles -->
            <div id="related-articles" class="container-narrow"></div>

            <div class="article-footer container-narrow">
                <div class="article-tags">
                    <a href="#">Critical Analysis</a>
                    <a href="#">Theology</a>
                    <a href="#">Orthodox Christianity</a>
                    <a href="#">Social Theory</a>
                    <a href="#">Philosophy</a>
                    <a href="#">Political Thought</a>
                </div>
                <p class="back-link">‚Üê <a href="/dispatch/">Back to all articles</a></p>
            </div>
        </article>
    </main>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-logo">Terminal Dispatch</div>
            <div class="footer-tagline">Essays on systems, design, and deliberate living</div>
            <div class="footer-links">
                <a href="/">Home</a>
                <a href="/dispatch/archive.html">Archive</a>
                <a href="#">RSS</a>
            </div>
        </div>
    </footer>

    <script>
        // Set current date in masthead
        const dateEl = document.getElementById('current-date');
        const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
        dateEl.textContent = new Date().toLocaleDateString('en-US', options);

        // Dark mode toggle
        const darkModeToggle = document.getElementById('dark-mode-toggle');
        const prefersDark = window.matchMedia('(prefers-color-scheme: dark)');
        
        function updateDarkMode(isDark) {
            document.documentElement.style.setProperty('--bg-color', isDark ? '#0d0d0d' : '#fbfbf9');
            document.documentElement.style.setProperty('--card-bg', isDark ? '#1a1a1a' : '#ffffff');
            document.documentElement.style.setProperty('--text-primary', isDark ? '#f5f5f5' : '#121212');
            document.documentElement.style.setProperty('--text-secondary', isDark ? '#a0a0a0' : '#5a5a5a');
            document.documentElement.style.setProperty('--border-color', isDark ? '#f5f5f5' : '#121212');
            document.documentElement.style.setProperty('--border-light', isDark ? '#333' : '#e0e0e0');
            darkModeToggle.querySelector('.icon').textContent = isDark ? '‚òÄ' : '‚òæ';
            localStorage.setItem('darkMode', isDark);
        }
        
        const savedMode = localStorage.getItem('darkMode');
        if (savedMode !== null) {
            updateDarkMode(savedMode === 'true');
        } else {
            updateDarkMode(prefersDark.matches);
        }
        
        darkModeToggle.addEventListener('click', () => {
            const isDark = localStorage.getItem('darkMode') === 'true';
            updateDarkMode(!isDark);
        });

        // Calculate and display reading time
        const articleContent = document.getElementById('article-content');
        if (articleContent && typeof calculateReadingTime === 'function') {
            const readingTime = calculateReadingTime(articleContent.textContent);
            const readingTimeEl = document.getElementById('reading-time');
            if (readingTimeEl) {
                readingTimeEl.textContent = `${readingTime} min read`;
            }
        }

        // Generate Table of Contents
        if (articleContent && typeof extractHeadings === 'function') {
            const headings = extractHeadings(articleContent);
            const tocContainer = document.getElementById('toc-container');
            
            if (headings.length > 0 && tocContainer) {
                let tocHTML = `
                    <div class="toc-container">
                        <div class="toc-header">
                            <h2 class="toc-title">Table of Contents</h2>
                            <button class="toc-toggle" id="toc-toggle">Hide</button>
                        </div>
                        <ul class="toc-list" id="toc-list">
                `;
                
                headings.forEach(heading => {
                    const className = heading.level === 'h3' ? 'toc-h3' : '';
                    tocHTML += `<li class="${className}"><a href="#${heading.id}">${heading.text}</a></li>`;
                });
                
                tocHTML += `</ul></div>`;
                tocContainer.innerHTML = tocHTML;
                
                // TOC toggle functionality
                const tocToggle = document.getElementById('toc-toggle');
                const tocList = document.getElementById('toc-list');
                
                tocToggle.addEventListener('click', () => {
                    tocList.classList.toggle('collapsed');
                    tocToggle.textContent = tocList.classList.contains('collapsed') ? 'Show' : 'Hide';
                });
                
                // Smooth scroll for TOC links
                tocContainer.querySelectorAll('a[href^="#"]').forEach(link => {
                    link.addEventListener('click', (e) => {
                        e.preventDefault();
                        const target = document.querySelector(link.getAttribute('href'));
                        if (target) {
                            target.scrollIntoView({ behavior: 'smooth', block: 'start' });
                        }
                    });
                });
            }
        }

        // Series Navigation
        const currentUrl = window.location.pathname;
        if (typeof getSeriesArticles === 'function') {
            const series = getSeriesArticles(currentUrl);
            const seriesNav = document.getElementById('series-navigation');
            
            if (series && seriesNav) {
                let seriesHTML = `
                    <div class="series-navigation">
                        <div class="series-title">Part of a Series</div>
                        <h2 class="series-name">${series.title}</h2>
                        <p class="series-progress">Part ${series.current} of ${series.total}</p>
                        <div class="series-links">
                `;
                
                if (series.previous) {
                    seriesHTML += `
                        <a href="${series.previous.url}" class="series-link">
                            <div class="series-link-label">‚Üê Previous</div>
                            <div class="series-link-title">${series.previous.title}</div>
                        </a>
                    `;
                }
                
                if (series.next) {
                    seriesHTML += `
                        <a href="${series.next.url}" class="series-link">
                            <div class="series-link-label">Next ‚Üí</div>
                            <div class="series-link-title">${series.next.title}</div>
                        </a>
                    `;
                }
                
                seriesHTML += `</div></div>`;
                seriesNav.innerHTML = seriesHTML;
            }
        }

        // Social Share Buttons
        const shareContainer = document.getElementById('social-share');
        if (shareContainer) {
            const pageTitle = document.querySelector('.article-title').textContent;
            const pageUrl = window.location.href;
            
            const shareButtons = [
                {
                    name: 'Twitter',
                    url: `https://twitter.com/intent/tweet?text=${encodeURIComponent(pageTitle)}&url=${encodeURIComponent(pageUrl)}`,
                    icon: '‚úï'
                },
                {
                    name: 'LinkedIn',
                    url: `https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(pageUrl)}`,
                    icon: 'in'
                },
                {
                    name: 'Email',
                    url: `mailto:?subject=${encodeURIComponent(pageTitle)}&body=${encodeURIComponent(pageUrl)}`,
                    icon: '‚úâ'
                }
            ];
            
            let buttonsHTML = shareButtons.map(btn => 
                `<a href="${btn.url}" class="share-button" target="_blank" rel="noopener">${btn.icon} ${btn.name}</a>`
            ).join('');
            
            // Add copy link button
            buttonsHTML += `<button class="share-button" id="copy-link-btn">‚éò Copy Link</button>`;
            
            shareContainer.innerHTML = '<span class="share-label">Share:</span>' + buttonsHTML;
            
            // Copy link functionality
            const copyBtn = document.getElementById('copy-link-btn');
            copyBtn.addEventListener('click', async () => {
                try {
                    await navigator.clipboard.writeText(pageUrl);
                    const originalText = copyBtn.textContent;
                    copyBtn.textContent = '‚úì Copied!';
                    setTimeout(() => {
                        copyBtn.textContent = originalText;
                    }, 2000);
                } catch (err) {
                    console.error('Failed to copy:', err);
                }
            });
            
            // Web Share API support
            if (navigator.share) {
                const webShareBtn = document.createElement('button');
                webShareBtn.className = 'share-button';
                webShareBtn.textContent = 'üì§ Share';
                webShareBtn.addEventListener('click', async () => {
                    try {
                        await navigator.share({
                            title: pageTitle,
                            url: pageUrl
                        });
                    } catch (err) {
                        console.log('Share cancelled or failed');
                    }
                });
                shareContainer.appendChild(webShareBtn);
            }
        }

        // Related Articles
        if (typeof getRelatedArticles === 'function') {
            const relatedArticles = getRelatedArticles(currentUrl, 3);
            const relatedContainer = document.getElementById('related-articles');
            
            if (relatedArticles.length > 0 && relatedContainer) {
                let relatedHTML = `
                    <div class="related-articles">
                        <h2 class="related-title">Related Articles</h2>
                        <div class="related-grid">
                `;
                
                relatedArticles.forEach(article => {
                    relatedHTML += `
                        <article class="related-article">
                            <span class="category">${article.category}</span>
                            <h3><a href="${article.url}">${article.title}</a></h3>
                            <p class="excerpt">${article.excerpt}</p>
                        </article>
                    `;
                });
                
                relatedHTML += `</div></div>`;
                relatedContainer.innerHTML = relatedHTML;
            }
        }

        // Display last updated timestamp
        const lastModified = new Date(document.lastModified);
        const articleDate = new Date('2026-01-15');
        if (lastModified > articleDate) {
            const metaEl = document.querySelector('.article-meta');
            if (metaEl) {
                const updateSpan = document.createElement('span');
                updateSpan.innerHTML = '<span class="separator">¬∑</span><span style="font-style: italic; color: var(--text-secondary);">Updated ' + lastModified.toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' }) + '</span>';
                metaEl.appendChild(updateSpan);
            }
        }
    </script>
</body>
</html>
